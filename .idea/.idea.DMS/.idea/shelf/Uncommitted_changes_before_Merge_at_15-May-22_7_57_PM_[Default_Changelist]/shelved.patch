Index: DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"./ModalWindow.css\";\r\nimport React from \"react\";\r\nimport closeButtonImg from \"../InRoomResidents/img/cross.svg\";\r\nimport \"./ModalWindowLayouts/Layouts.css\"\r\n\r\nfunction template() {\r\n    return (\r\n        this.props.show ?\r\n            <div className=\"modal show-modal\">\r\n                <div className={`modal-content ${this.props.layoutName}`}>\r\n                    {this.props.layout}\r\n                    <button onClick={() => this.props.toggleHandler()} className=\"close-residents-button\"><img\r\n                        alt=\"close\" src={closeButtonImg}/></button>\r\n                </div>\r\n            </div> : ''\r\n    );\r\n};\r\n\r\nexport default template;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx b/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx	(date 1652631486801)
@@ -7,7 +7,7 @@
     return (
         this.props.show ?
             <div className="modal show-modal">
-                <div className={`modal-content ${this.props.layoutName}`}>
+                <div className={`modal-content ${this.layoutsNameToHtmlClassName(this.props.layout.type.name)}`}>
                     {this.props.layout}
                     <button onClick={() => this.props.toggleHandler()} className="close-residents-button"><img
                         alt="close" src={closeButtonImg}/></button>
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>.modal-content .resident-content-row {\r\n    box-shadow: none;\r\n    margin-bottom: 2%;\r\n    background: #FFF;\r\n    color: #009381;\r\n    border-radius: 20px;\r\n    padding: .6% 2%;\r\n    font-size: 17px;\r\n    margin-top: 1%;\r\n    width: 90%;\r\n}\r\n\r\n.modal-content label {\r\n    font-family: 'Ubuntu';\r\n    font-style: normal;\r\n    font-weight: 300;\r\n    font-size: 24px;\r\n    line-height: 28px;\r\n}\r\n\r\n.modal-content input[type=\"submit\"] {\r\n    width: 172px;\r\n    height: 42px;\r\n    align-items: center;\r\n}\r\n\r\n.modal-content div {\r\n    padding: 0 5%;\r\n}   \r\n\r\n/* Settlement Order */\r\n.settlement-order-body {\r\n    width: 80%;\r\n    margin: auto;\r\n    padding: 1%;\r\n}\r\n\r\n.settlement-orders {\r\n    width: 52.5%;\r\n    padding: 1%;\r\n}\r\n\r\n\r\n.mini {\r\n    letter-spacing: 0.4em;\r\n    font-family: 'Ubuntu';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 23px;\r\n    line-height: 26px;\r\n}\r\n\r\n.type {\r\n    margin-top: 5%;\r\n    margin-bottom: 3%;\r\n}\r\n\r\n.settlement-orders input[name='passportNumber'] {\r\n    max-width: 25%;\r\n    float: right;\r\n}\r\n\r\n.settlement-orders input[name='parentPassportNumber'] {\r\n    max-width: 25%;\r\n    float: right;\r\n}\r\n\r\n.settlement-orders form .resident-content-row:nth-child(2) input {\r\n    margin-right: 42%;\r\n    margin-left: 0;\r\n}\r\n\r\n.settlement-orders input {\r\n    color: #3A7890;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 19px;\r\n    max-width: 67%;\r\n    height: 10px;\r\n    padding: 2% 3%;\r\n    float: right;\r\n}\r\n\r\n/* Rating Operations, Eviction orders, Transactions */\r\n.rating-operations, .eviction-orders, .transactions {\r\n    height: 35%;\r\n    width: 45%;\r\n}\r\n\r\n.rating-operations form, .eviction-orders form, .transactions form {\r\n    margin-top: 5%;\r\n}\r\n\r\n.rating-operations input, .eviction-orders input, .transactions input {\r\n    color: #3A7890;\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 19px;\r\n    max-width: 45%;\r\n    height: 10px;\r\n    padding: 2% 3%;\r\n    float: right;\r\n    margin-right: 0;\r\n}\r\n\r\n\r\n/* Transaction Layout */\r\n.transactions {\r\n    margin-left: 5%;\r\n    margin-right: 5%;\r\n}\r\n.transactions .radio-label {\r\n    background: #D9FFFA;\r\n    border-radius: 10px;\r\n    width: 30%;\r\n    height: 3%;\r\n    cursor: pointer;\r\n    margin-right: 5%;\r\n}\r\n\r\n\r\n.transactions input[type=\"radio\"]:checked + .radio-label {\r\n    background: #FFFFFF;\r\n    border: 1px solid #00938A;\r\n    border-radius: 10px;\r\n    width: 30%;\r\n    height: 3%;\r\n    cursor: pointer;\r\n}\r\n\r\n/* Settings save layout */\r\n\r\n.settings-save {\r\n    width: 35%;\r\n    height: 35%;\r\n}\r\n\r\n.settings-save-content {\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.settings-save .info {\r\n    display: inline-block;\r\n    font-family: 'Ubuntu';\r\n    font-style: normal;\r\n    font-weight: 400;\r\n    font-size: 20px;\r\n    line-height: 26px;\r\n    text-align: center;\r\n    color: #3A7890;\r\n    \r\n    margin-top: 5%;\r\n}\r\n\r\n.settings-save .additional-info {\r\n    margin-top: 1.5%;\r\n    font-family: 'Ubuntu';\r\n    font-style: normal;\r\n    font-weight: 300;\r\n    font-size: 16px;\r\n    line-height: 18px;\r\n    text-align: center;\r\n    letter-spacing: 0.015em;\r\n    \r\n    color: rgba(58, 120, 144, 0.59);\r\n\r\n}\r\n\r\n.settings-save-content .password-repeat {\r\n    color: #3A7890;\r\n    opacity: 0.6;\r\n    border: 0;\r\n    width: 50%;\r\n    height: 35px;\r\n    border-radius: 12px;\r\n    margin-top: 10%;\r\n    margin-left: 0;\r\n\r\n    font-size: 16px;\r\n    font-family: 'Ubuntu', serif;\r\n    font-style: normal;\r\n    font-weight: 300;\r\n    line-height: 18px;\r\n\r\n    padding: 0 65px;\r\n\r\n    background-size: 5.625%;\r\n    background: #D9FFFA url(../../Login/img/lock-icon.svg) no-repeat calc((24 / 365) * 100%);\r\n}\r\n\r\n.settings-save-content .buttons-container {\r\n    padding: 0;\r\n    width: 100%;\r\n    margin-top: 10%;\r\n    margin-left: 8%;\r\n}\r\n\r\n.settings-save-content .settings-btn {\r\n    transition: background-color 0.5s;\r\n    outline: 0;\r\n    border: 0;\r\n    cursor: pointer;\r\n    background: #1ECBAD;\r\n    box-shadow: 0px 0px 15px rgba(0, 107, 94, 0.3);\r\n    border-radius: 12px;\r\n\r\n    font-family: 'Ubuntu';\r\n    font-size: 22px;\r\n    line-height: 25px;\r\n    text-align: center;\r\n    color: #FFFFFF;\r\n    padding: 1% 9%;\r\n    \r\n    max-width: 40%;\r\n}\r\n\r\n.settings-save-content .buttons-container .cancel {\r\n    margin-right: 18.5%;\r\n    padding: 1% 13%;\r\n}\r\n\r\n.settings-save-content .buttons-container .cancel:hover {\r\n    background-color: #1aab92;\r\n}\r\n\r\n.settings-save-content .buttons-container .done {\r\n    background: #C4C4C4;\r\n    cursor: auto;\r\n}\r\n\r\n.settings-save-content .buttons-container .active {\r\n    background: #2D8CB5;\r\n}\r\n\r\n.settings-save-content .buttons-container .active:hover {\r\n    background: #2487af;\r\n}\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css	(date 1652631916512)
@@ -26,8 +26,15 @@
 
 .modal-content div {
     padding: 0 5%;
-}   
+}
 
+/* Residents list*/
+
+.residents-list-layout .in-room-residents-scroll-zone {
+    padding: 1.5%;
+    margin-top: 2.5%;
+}
+
 /* Settlement Order */
 .settlement-order-body {
     width: 80%;
@@ -35,7 +42,7 @@
     padding: 1%;
 }
 
-.settlement-orders {
+.settlement-order {
     width: 52.5%;
     padding: 1%;
 }
@@ -55,22 +62,22 @@
     margin-bottom: 3%;
 }
 
-.settlement-orders input[name='passportNumber'] {
+.settlement-order input[name='passportNumber'] {
     max-width: 25%;
     float: right;
 }
 
-.settlement-orders input[name='parentPassportNumber'] {
+.settlement-order input[name='parentPassportNumber'] {
     max-width: 25%;
     float: right;
 }
 
-.settlement-orders form .resident-content-row:nth-child(2) input {
+.settlement-order form .resident-content-row:nth-child(2) input {
     margin-right: 42%;
     margin-left: 0;
 }
 
-.settlement-orders input {
+.settlement-order input {
     color: #3A7890;
     font-style: normal;
     font-weight: 400;
@@ -82,16 +89,16 @@
 }
 
 /* Rating Operations, Eviction orders, Transactions */
-.rating-operations, .eviction-orders, .transactions {
+.rating-operation, .eviction-order, .transaction-layout {
     height: 35%;
     width: 45%;
 }
 
-.rating-operations form, .eviction-orders form, .transactions form {
+.rating-operation form, .eviction-order form, .transaction-layout form {
     margin-top: 5%;
 }
 
-.rating-operations input, .eviction-orders input, .transactions input {
+.rating-operation input, .eviction-order input, .transaction-layout input {
     color: #3A7890;
     font-style: normal;
     font-weight: 400;
@@ -105,11 +112,11 @@
 
 
 /* Transaction Layout */
-.transactions {
+.transaction-layout {
     margin-left: 5%;
     margin-right: 5%;
 }
-.transactions .radio-label {
+.transaction-layout .radio-label {
     background: #D9FFFA;
     border-radius: 10px;
     width: 30%;
@@ -119,7 +126,7 @@
 }
 
 
-.transactions input[type="radio"]:checked + .radio-label {
+.transaction-layout input[type="radio"]:checked + .radio-label {
     background: #FFFFFF;
     border: 1px solid #00938A;
     border-radius: 10px;
@@ -150,7 +157,7 @@
     line-height: 26px;
     text-align: center;
     color: #3A7890;
-    
+
     margin-top: 5%;
 }
 
@@ -163,7 +170,7 @@
     line-height: 18px;
     text-align: center;
     letter-spacing: 0.015em;
-    
+
     color: rgba(58, 120, 144, 0.59);
 
 }
@@ -212,7 +219,7 @@
     text-align: center;
     color: #FFFFFF;
     padding: 1% 9%;
-    
+
     max-width: 40%;
 }
 
@@ -236,6 +243,4 @@
 
 .settings-save-content .buttons-container .active:hover {
     background: #2487af;
-}
-
-
+}
\ No newline at end of file
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from \"react\";\r\nimport \"./Layouts.css\"\r\n\r\nclass EvictionOrderLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.resident.id,\r\n            fullName: this.props.resident[\"LastName\"] + \" \" + this.props.resident[\"FirstName\"] + \" \" + this.props.resident[\"Patronymic\"],\r\n            evictionReason: \"\",\r\n            evictionDate: \"\",\r\n        }\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    }\r\n    \r\n    async submitEviction(e) {\r\n        e.preventDefault()\r\n        await fetch(\"api/documents/\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Authorization\": localStorage.getItem(\"token\"),\r\n                \"type\": \"SettlementOrder\",\r\n                \"Content-Type\": 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                \"RoomId\": parseInt(this.props.roomId),\r\n                \"ResidentId\": parseInt(this.state.id),\r\n                \"OrderDate\": new Date(Date.now()).toISOString().slice(0, 10) + \"T00:00:00Z\",\r\n                \"ParentsFullName\": this.state.parentFullName,\r\n                \"ParentsPassportSeriesNumber\": this.state.parentPassportNumber,\r\n                \"ParentsPassportIssuedBy\": this.state.parentPassportIssuedBy,\r\n                \"ParentsPassportAddress\": this.state.parentAddress\r\n            })\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(data)})\r\n        //this.props.updateRoom(this.props.resident)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"rooms-header in-modal\">ПРИКАЗ О ВЫСЕЛЕНИИ</div>\r\n                <form>\r\n                    <div className=\"resident-content-row\">\r\n                        <label>ФИО:</label> <input autoFocus={this.state.id === null} name={\"fullName\"}\r\n                                                   onChange={this.handleChange} readOnly={true}\r\n                                                   value={this.state.fullName} type=\"text\"/> <br/>\r\n                    </div>\r\n                    <div className=\"resident-content-row\">\r\n                        <label>Причина выселения:</label> <input name={\"ratingAddReason\"} onChange={this.handleChange}\r\n                                                                  readOnly={false} value={this.state.evictionReason}\r\n                                                                  type=\"text\"/> <br/>\r\n                    </div>\r\n                    <div className=\"resident-content-row\">\r\n                        <label>Дата:</label> <input name={\"ratingAddDate\"} onChange={this.handleChange} readOnly={false}\r\n                                                    value={this.state.evictionDate} type=\"date\"/> <br/>\r\n                    </div>\r\n                    <div className={\"resident-content-row\"}>\r\n                        <input onSubmit={(e) => this.submitEviction(e)} className={\"save-btn\"} type={\"submit\"} value={\"Сохранить\"}/>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default EvictionOrderLayout;   
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js	(date 1652633353479)
@@ -6,10 +6,10 @@
         super(props);
 
         this.state = {
-            id: this.props.resident.id,
+            id: this.props.resident["ResidentId"],
             fullName: this.props.resident["LastName"] + " " + this.props.resident["FirstName"] + " " + this.props.resident["Patronymic"],
             evictionReason: "",
-            evictionDate: "",
+            evictionDate: new Date(Date.now()).toISOString().slice(0, 10),
         }
         this.handleChange = this.handleChange.bind(this)
     }
@@ -24,23 +24,19 @@
             method: "POST",
             headers: {
                 "Authorization": localStorage.getItem("token"),
-                "type": "SettlementOrder",
+                "type": "EvictionOrder",
                 "Content-Type": 'application/json',
             },
             body: JSON.stringify({
-                "RoomId": parseInt(this.props.roomId),
                 "ResidentId": parseInt(this.state.id),
-                "OrderDate": new Date(Date.now()).toISOString().slice(0, 10) + "T00:00:00Z",
-                "ParentsFullName": this.state.parentFullName,
-                "ParentsPassportSeriesNumber": this.state.parentPassportNumber,
-                "ParentsPassportIssuedBy": this.state.parentPassportIssuedBy,
-                "ParentsPassportAddress": this.state.parentAddress
+                "OrderDate": this.state.evictionDate + "T00:00:00Z",
+                "Description": this.state.evictionReason
             })
         })
             .then((response) => response.json())
             .then((data) => {
                 console.log(data)})
-        //this.props.updateRoom(this.props.resident)
+        this.props.updateRoom(this.props.resident, true)
     }
 
     render() {
@@ -49,17 +45,16 @@
                 <div className="rooms-header in-modal">ПРИКАЗ О ВЫСЕЛЕНИИ</div>
                 <form>
                     <div className="resident-content-row">
-                        <label>ФИО:</label> <input autoFocus={this.state.id === null} name={"fullName"}
-                                                   onChange={this.handleChange} readOnly={true}
-                                                   value={this.state.fullName} type="text"/> <br/>
+                        <label>ФИО:</label> <input name={"fullName"}
+                                                   value={this.state.fullName} readOnly={true} type="text"/> <br/>
                     </div>
                     <div className="resident-content-row">
-                        <label>Причина выселения:</label> <input name={"ratingAddReason"} onChange={this.handleChange}
+                        <label>Причина выселения:</label> <input name={"evictionReason"} onChange={this.handleChange}
                                                                   readOnly={false} value={this.state.evictionReason}
                                                                   type="text"/> <br/>
                     </div>
                     <div className="resident-content-row">
-                        <label>Дата:</label> <input name={"ratingAddDate"} onChange={this.handleChange} readOnly={false}
+                        <label>Дата:</label> <input name={"evictionDate"} onChange={this.handleChange} readOnly={false}
                                                     value={this.state.evictionDate} type="date"/> <br/>
                     </div>
                     <div className={"resident-content-row"}>
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from \"react\";\r\nimport dotsImg from \"../../Resident/img/resident3Dots.svg\";\r\nimport template from \"../ModalWindow\";\r\nimport ModalWindow from \"../ModalWindow\";\r\nimport SettlementOrderLayout from \"./SettlementOrderLayout\";\r\n\r\nclass ResidentsListLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showSettlementModal: false,\r\n            chosenResident: null,\r\n        }\r\n\r\n        this.toggleSettlementModal = this.toggleSettlementModal.bind(this)\r\n    }\r\n\r\n    filterByName(e) {\r\n        this.props.filterHandler(this.props.residentsList.filter(i =>\r\n            (~(i[\"FirstName\"] + i[\"LastName\"] + i[\"Patronymic\"]).toLowerCase().indexOf(e.target.value.toLowerCase()))))\r\n    }\r\n\r\n    async toggleSettlementModal(resident) {\r\n        await this.setState({\r\n            showSettlementModal: !this.state.showSettlementModal,\r\n            chosenResident: resident,\r\n        })\r\n\r\n        document.querySelector(\".modal-content\").className = this.state.showSettlementModal ? \r\n            \"modal-content settlement-orders\" : \"modal-content\"\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.state.showSettlementModal ?\r\n                <SettlementOrderLayout\r\n                    toggleModal={this.toggleSettlementModal}\r\n                    resident={this.state.chosenResident}\r\n                    roomId={this.props.roomId}\r\n                    updateRoom={this.props.updateRoom}\r\n                />\r\n                :\r\n                <div>\r\n                    <div className=\"rooms-header in-modal\">СПИСКИ</div>\r\n                    <input type=\"text\" onInput={(e) => this.filterByName(e)} placeholder=\"ВВЕДИТЕ ИМЯ\"/>\r\n                    <div className=\"in-room-residents-scroll-zone\">\r\n                        {\r\n                            this.props.residentsFilterList !== undefined ?\r\n                                this.props.residentsFilterList.map(resident =>\r\n                                    resident[\"RoomId\"] === null ?\r\n                                        <div className=\"resident-collapsible in-modal\">\r\n                                            <button\r\n                                                className=\"resident-header\"\r\n                                                onClick={() => this.toggleSettlementModal(resident)}\r\n                                            >\r\n                                                {resident[\"LastName\"].toUpperCase()} {resident[\"FirstName\"].toUpperCase()} {resident[\"Patronymic\"].toUpperCase()}\r\n                                                <img className=\"header-dots\" alt=\"dots\" src={dotsImg}\r\n                                                />\r\n                                            </button>\r\n                                        </div> : '') : ''\r\n                        }\r\n                    </div>\r\n                </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ResidentsListLayout;   
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js	(date 1652631997284)
@@ -28,7 +28,7 @@
         })
 
         document.querySelector(".modal-content").className = this.state.showSettlementModal ? 
-            "modal-content settlement-orders" : "modal-content"
+            "modal-content settlement-order" : "modal-content"
     }
 
     render() {
@@ -36,6 +36,7 @@
             this.state.showSettlementModal ?
                 <SettlementOrderLayout
                     toggleModal={this.toggleSettlementModal}
+                    toggleHandler={this.props.toggleHandler}
                     resident={this.state.chosenResident}
                     roomId={this.props.roomId}
                     updateRoom={this.props.updateRoom}
@@ -48,7 +49,6 @@
                         {
                             this.props.residentsFilterList !== undefined ?
                                 this.props.residentsFilterList.map(resident =>
-                                    resident["RoomId"] === null ?
                                         <div className="resident-collapsible in-modal">
                                             <button
                                                 className="resident-header"
@@ -58,7 +58,7 @@
                                                 <img className="header-dots" alt="dots" src={dotsImg}
                                                 />
                                             </button>
-                                        </div> : '') : ''
+                                        </div>) : ''
                         }
                     </div>
                 </div>
Index: DMS/ClientApp/src/components/Resident/Resident.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"./Resident.css\";\r\nimport dotsImg from './img/resident3Dots.svg'\r\nimport yellowDot from './img/yellowDot.svg'\r\nimport greenDot from './img/greenDot.svg'\r\nimport redDot from './img/redDot.svg'\r\nimport React from \"react\";\r\nimport $ from 'jquery'\r\n\r\nfunction template() {\r\n  return (\r\n      <div className={\"resident-collapsible\"}>\r\n          <button\r\n              onClick={(e) => this.openCollapsible(e)} className={\"resident-header\"}>\r\n              {this.state.LastName.toUpperCase()} {this.state.FirstName.toUpperCase()} {this.state.Patronymic.toUpperCase()}\r\n              <img className=\"header-dots\" alt=\"dots\" src={dotsImg}/>\r\n              {this.state.Rating < 0 ? <img alt={\"dot\"} className={\"state-dot\"} src={redDot}/> : ''}\r\n              {this.state.Course == 1 ? <img alt={\"dot\"} className={\"state-dot\"} src={greenDot}/> : ''}\r\n              {this.state.RoomId === null ? <img alt={\"dot\"} className={\"state-dot\"} src={yellowDot}/> : ''}\r\n          </button>\r\n          <div className=\"resident-content\" style={{maxHeight: this.state.ResidentId !== null ? null : \"188px\"}}>\r\n              <form>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Фамилия:</label> <input autoFocus={this.state.ResidentId === null} name={\"LastName\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.LastName} type=\"text\"/> <br/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Имя:</label> <input name={\"FirstName\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.FirstName} type=\"text\"/> <br/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Отчество:</label> <input name={\"Patronymic\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Patronymic} type=\"text\"/> <br/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Пол:</label>\r\n\r\n                      <input id={\"resident_gender_male\" + this.state.ResidentId} type=\"radio\" onChange={this.handleChange} readOnly={this.props.readOnly} checked={this.state.Gender === 'М'}  name=\"Gender\" value={\"М\"}/>\r\n                      <label className=\"radio-label\" htmlFor={\"resident_gender_male\" + this.state.ResidentId}>М</label>\r\n\r\n                      <input id={\"resident_gender_female\" + this.state.ResidentId} type=\"radio\" onChange={this.handleChange} readOnly={this.props.readOnly} checked={this.state.Gender === 'Ж'} name=\"Gender\" value={\"Ж\"}/>\r\n                      <label className=\"radio-label\" htmlFor={\"resident_gender_female\" + this.state.ResidentId}>Ж</label>\r\n\r\n                      <label>Дата рождения:</label> <input name={\"BirthDate\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.BirthDate} type=\"date\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Серия и номер паспорта:</label>\r\n                      <input name={\"SeriesAndNumber\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.SeriesAndNumber} type={\"text\"}/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Кем выдан:</label>\r\n                      <input name={\"IssuedBy\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.IssuedBy}  type=\"text\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Дата выдачи:</label>\r\n                      <input name={\"IssueDate\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.IssueDate} type=\"date\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Код подразделения:</label>\r\n                      <input name={\"DepartmentCode\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.DepartmentCode} type=\"number\"/>\r\n                  </div>\r\n\r\n                  <div className=\"resident-content-row\">\r\n                      <label>ИНН:</label>\r\n                      <input name={\"Tin\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Tin} style={{width: \"35%\", marginRight: \"15%\"}} type=\"text\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Адрес прописки:</label>\r\n                      <input name={\"Address\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Address}  style={{width: \"35%\", marginRight: \"15%\"}} type=\"text\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Курс:</label>\r\n                      <input name={\"Course\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Course}  type=\"number\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Рейтинг:</label>\r\n                      <input name={\"Rating\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Rating} type=\"number\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Докладные:</label>\r\n                      <input name={\"Reports\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Reports} type=\"number\"/>\r\n                  </div>\r\n                  <div className=\"resident-content-row\">\r\n                      <label>Задолженость:</label>\r\n                      <input name={\"Debt\"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Debt} type=\"number\"/>\r\n                  </div>\r\n              </form>\r\n              <div className={\"button-content-row\"}>\r\n                  <input className={\"evict-btn\"} type={\"submit\"} value={\"Выселить\"}/>\r\n                  <input className={\"transaction-btn\"} type={\"submit\"} value={\"Транзакция\"}/>\r\n                  {\r\n                      this.props.showSaveBtn ?\r\n                          <input type=\"submit\" onClick={(e) => this.handleSubmit(e)} value=\"Сохранить\"/>\r\n                          : \"\"\r\n                  }\r\n              </div>\r\n          </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default template;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/Resident/Resident.jsx b/DMS/ClientApp/src/components/Resident/Resident.jsx
--- a/DMS/ClientApp/src/components/Resident/Resident.jsx	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/Resident/Resident.jsx	(date 1652633202310)
@@ -77,13 +77,13 @@
                       <input name={"Reports"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Reports} type="number"/>
                   </div>
                   <div className="resident-content-row">
-                      <label>Задолженость:</label>
+                      <label>Баланс:</label>
                       <input name={"Debt"} onChange={this.handleChange} readOnly={this.props.readOnly} value={this.state.Debt} type="number"/>
                   </div>
               </form>
               <div className={"button-content-row"}>
-                  <input className={"evict-btn"} type={"submit"} value={"Выселить"}/>
-                  <input className={"transaction-btn"} type={"submit"} value={"Транзакция"}/>
+                  <input onClick={() => this.props.toggleEvictionModal(this.props.residentObj)} className={"evict-btn"} type={"submit"} value={"Выселить"}/>
+                  <input onClick={() => this.props.toggleTransactionModal(this.props.residentObj)} className={"transaction-btn"} type={"submit"} value={"Транзакция"}/>
                   {
                       this.props.showSaveBtn ?
                           <input type="submit" onClick={(e) => this.handleSubmit(e)} value="Сохранить"/>
Index: DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import \"./InRoomResidents.css\";\r\nimport React from \"react\";\r\nimport addButtonImg from './img/addResidentButton.svg'\r\nimport closeButtonImg from './img/cross.svg'\r\nimport Resident from \"../Resident/Resident\";\r\nimport ModalWindow from \"../ModalWindow\";\r\nimport ResidentsListLayout from \"../ModalWindow/ModalWindowLayouts/ResidentsListLayout\";\r\n\r\nfunction template() {\r\n\r\n    return (\r\n        this.props.show ?\r\n        <div className=\"in-room-residents\">\r\n            <ModalWindow\r\n                show={this.state.showModal}\r\n                layout={\r\n                <ResidentsListLayout \r\n                    residentsList={this.state.modalResidentsList}\r\n                    residentsFilterList={this.state.modalResidentsFilterList}\r\n                    filterHandler={this.filterHandler}\r\n                    roomId={this.props.room[\"RoomId\"]}\r\n                    updateRoom={this.props.updateRoom}\r\n                />}\r\n                toggleHandler={this.toggleModal}\r\n            />\r\n            <button onClick={this.props.closeButtonClickHandler} className=\"close-residents-button\"><img alt=\"close\" src={closeButtonImg}/></button>\r\n            <div className=\"rooms-header\">ПРОЖИВАЮЩИЕ {this.props.room[\"RoomId\"]}</div>\r\n\r\n            <form>\r\n                <input id={\"resident_gender_male\" + this.props.room[\"RoomId\"] + this.props.room[\"Gender\"]} \r\n                       type=\"radio\" \r\n                       onChange={this.handleChange} \r\n                       readOnly={this.props.room[\"Residents\"].length > 0} \r\n                       checked={this.props.room[\"Gender\"] === 'M'}  \r\n                       name=\"Gender\" value={\"М\"}/>\r\n                <label className=\"radio-label\" htmlFor={\"resident_gender_male\" + this.props.room[\"RoomId\"] + this.props.room[\"Gender\"]}>М</label>\r\n\r\n                <input id={\"resident_gender_female\" + this.props.room[\"RoomId\"] + this.props.room[\"Gender\"]} \r\n                       type=\"radio\" \r\n                       onChange={this.handleChange} \r\n                       readOnly={this.props.room[\"Residents\"].length > 0} \r\n                       checked={this.props.room[\"Gender\"] === 'F'} \r\n                       name=\"Gender\" value={\"Ж\"}/>\r\n                <label className=\"radio-label\" htmlFor={\"resident_gender_female\" + this.props.room[\"RoomId\"] + this.props.room[\"Gender\"]}>Ж</label>\r\n            </form>\r\n            \r\n            <div className=\"in-room-residents-scroll-zone\">\r\n                {\r\n                    this.props.room[\"Residents\"] !== undefined ?\r\n                    this.props.room[\"Residents\"].map(resident => \r\n                    <Resident key={resident} \r\n                              readOnly={true}\r\n                              showSaveBtn={false}\r\n                              id={resident[\"ResidentId\"]} \r\n                              lastname={resident[\"LastName\"]} \r\n                              firstName={resident[\"FirstName\"]}\r\n                              patronymic={resident[\"Patronymic\"]}\r\n                              gender={resident[\"Gender\"]}\r\n                              birthDate={resident[\"BirthDate\"]}\r\n                              passportInformation={resident[\"PassportInformation\"]}\r\n                              course={resident[\"Course\"]}\r\n                              tin={resident[\"Tin\"]}\r\n                              rating={resident[\"Rating\"]}\r\n                              debt={resident[\"Debt\"]}\r\n                              reports={resident[\"Reports\"]}\r\n                    />) : ''\r\n                }\r\n                {\r\n                    this.props.room[\"Residents\"] !== undefined && this.props.room[\"Capacity\"] > this.props.room[\"Residents\"].length ?\r\n                        <button onClick={this.toggleModal} className=\"add-resident-button\"><img alt=\"plus\" src={addButtonImg}/></button>\r\n                        : ''\r\n                }\r\n                \r\n            </div>\r\n\r\n        </div> : ''\r\n    );\r\n}\r\n\r\nexport default template;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx b/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx
--- a/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx	(date 1652632302386)
@@ -5,6 +5,8 @@
 import Resident from "../Resident/Resident";
 import ModalWindow from "../ModalWindow";
 import ResidentsListLayout from "../ModalWindow/ModalWindowLayouts/ResidentsListLayout";
+import EvictionOrderLayout from "../ModalWindow/ModalWindowLayouts/EvictionOrderLayout";
+import TransactionsLayout from "../ModalWindow/ModalWindowLayouts/TransactionsLayout";
 
 function template() {
 
@@ -13,19 +15,34 @@
         <div className="in-room-residents">
             <ModalWindow
                 show={this.state.showModal}
-                layout={
-                <ResidentsListLayout 
-                    residentsList={this.state.modalResidentsList}
-                    residentsFilterList={this.state.modalResidentsFilterList}
-                    filterHandler={this.filterHandler}
-                    roomId={this.props.room["RoomId"]}
-                    updateRoom={this.props.updateRoom}
-                />}
-                toggleHandler={this.toggleModal}
+                layout=
+                    {
+                        this.state.modalLayout === "residentsList" ?
+                        <ResidentsListLayout
+                            residentsList={this.state.modalResidentsList}
+                            residentsFilterList={this.state.modalResidentsFilterList}
+                            filterHandler={this.filterHandler}
+                            roomId={this.props.room["RoomId"]}
+                            updateRoom={this.props.updateRoom}
+                            toggleHandler={this.toggleHandler}
+                        /> 
+                            : this.state.modalLayout === "evictionOrder" ?
+                            <EvictionOrderLayout 
+                                resident={this.state.chosenResident}
+                                updateRoom={this.props.updateRoom}
+                                toggleHandler={this.toggleHandler}
+                            /> 
+                                : <TransactionsLayout
+                                    resident={this.state.chosenResident}
+                                    toggleHandler={this.toggleHandler}
+                                />
+                            
+                    }
+                toggleHandler={this.toggleHandler}
             />
             <button onClick={this.props.closeButtonClickHandler} className="close-residents-button"><img alt="close" src={closeButtonImg}/></button>
             <div className="rooms-header">ПРОЖИВАЮЩИЕ {this.props.room["RoomId"]}</div>
-
+            
             <form>
                 <input id={"resident_gender_male" + this.props.room["RoomId"] + this.props.room["Gender"]} 
                        type="radio" 
@@ -49,6 +66,7 @@
                     this.props.room["Residents"] !== undefined ?
                     this.props.room["Residents"].map(resident => 
                     <Resident key={resident} 
+                              residentObj={resident}
                               readOnly={true}
                               showSaveBtn={false}
                               id={resident["ResidentId"]} 
@@ -63,11 +81,14 @@
                               rating={resident["Rating"]}
                               debt={resident["Debt"]}
                               reports={resident["Reports"]}
+                              
+                              toggleEvictionModal={this.toggleEvictionModal}
+                              toggleTransactionModal={this.toggleTransactionModal}
                     />) : ''
                 }
                 {
                     this.props.room["Residents"] !== undefined && this.props.room["Capacity"] > this.props.room["Residents"].length ?
-                        <button onClick={this.toggleModal} className="add-resident-button"><img alt="plus" src={addButtonImg}/></button>
+                        <button onClick={this.toggleResidentsListModal} className="add-resident-button"><img alt="plus" src={addButtonImg}/></button>
                         : ''
                 }
                 
Index: DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from \"react\";\r\nimport template from \"./InRoomResidents.jsx\";\r\n\r\nclass InRoomResidents extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: false,\r\n            show: true,\r\n            modalResidentsList: [],\r\n            modalResidentsFilterList: [],\r\n        }\r\n        \r\n        this.toggleModal = this.toggleModal.bind(this)\r\n        this.filterHandler = this.filterHandler.bind(this)\r\n    }\r\n    \r\n    //handlers\r\n    \r\n    async toggleModal() {\r\n        const gender = this.props.room[\"Gender\"] === \"F\" ? \"Ж\" : \"М\"\r\n        \r\n        let data = await this.fetchResidents()\r\n        data = data.filter((i) => i[\"Gender\"] === gender)\r\n        this.setState({\r\n            showModal: !this.state.showModal,\r\n            modalResidentsList: data,\r\n            modalResidentsFilterList: data\r\n        })\r\n    }\r\n    \r\n    filterHandler(val) {\r\n        this.setState({\r\n            modalResidentsFilterList: val\r\n        })\r\n    }\r\n    \r\n    // fetch functions\r\n    \r\n    async fetchResidents() {\r\n        const requestUrl = \"api/residents\"\r\n        const response = await fetch(requestUrl, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\" : localStorage.getItem(\"token\")\r\n            }\r\n        })\r\n        \r\n        const data = await response.json();\r\n        return data.Value;\r\n    }\r\n\r\n    render() {\r\n        return template.call(this);\r\n    }\r\n\r\n}\r\n\r\nexport default InRoomResidents;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js b/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js
--- a/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js	(date 1652631258586)
@@ -1,5 +1,6 @@
 import React from "react";
 import template from "./InRoomResidents.jsx";
+import ResidentsListLayout from "../ModalWindow/ModalWindowLayouts/ResidentsListLayout";
 
 class InRoomResidents extends React.Component {
     constructor(props) {
@@ -9,23 +10,50 @@
             show: true,
             modalResidentsList: [],
             modalResidentsFilterList: [],
+            modalLayout: null,
         }
         
-        this.toggleModal = this.toggleModal.bind(this)
+        this.toggleHandler = this.toggleHandler.bind(this)
+        this.toggleResidentsListModal = this.toggleResidentsListModal.bind(this)
+        this.toggleEvictionModal = this.toggleEvictionModal.bind(this)
+        this.toggleTransactionModal = this.toggleTransactionModal.bind(this)
         this.filterHandler = this.filterHandler.bind(this)
     }
     
     //handlers
     
-    async toggleModal() {
+    toggleHandler() {
+        this.setState({
+            showModal: !this.state.showModal
+        })
+    }
+    
+    async toggleResidentsListModal() {
         const gender = this.props.room["Gender"] === "F" ? "Ж" : "М"
-        
         let data = await this.fetchResidents()
-        data = data.filter((i) => i["Gender"] === gender)
+        data = data.filter((i) => i["Gender"] === gender && i["RoomId"] === null)
         this.setState({
             showModal: !this.state.showModal,
             modalResidentsList: data,
-            modalResidentsFilterList: data
+            modalResidentsFilterList: data,
+            modalLayout: "residentsList",
+        })
+    }
+    
+    toggleEvictionModal(resident) {
+        this.setState({
+            showModal: !this.state.showModal,
+            chosenResident: resident,
+            modalLayout: "evictionOrder",
+        })
+    }
+
+    toggleTransactionModal(resident) {
+        console.log(resident)
+        this.setState({
+            showModal: !this.state.showModal,
+            chosenResident: resident,
+            modalLayout: "transactionOrder",
         })
     }
     
Index: DMS/Resources/DocumentsResource.cs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>using System.Text.Json;\r\nusing DMS.Exceptions;\r\nusing DMS.Models;\r\nusing Microsoft.EntityFrameworkCore;\r\n\r\nnamespace DMS.Resources;\r\n\r\npublic class DocumentsResource : ResourceBase\r\n{\r\n    private readonly ApplicationContext _context;\r\n    private readonly ILogger<DocumentsResource> _logger;\r\n\r\n    public DocumentsResource(ApplicationContext context,\r\n        ILogger<DocumentsResource> logger)\r\n    {\r\n        _context = context;\r\n        _logger = logger;\r\n    }\r\n\r\n    public IQueryable GetAllRatingChangeCategories()\r\n    {\r\n        return _context.RatingChangeCategories;\r\n    }\r\n\r\n    private T? DeserializeDocument<T>(string data) where T : class\r\n    {\r\n        try\r\n        {\r\n            return JsonSerializer.Deserialize<T>(data);\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            _logger.Log(LogLevel.Information,\r\n                \"Failed to deserialize a document\");\r\n            throw new InvalidRequestDataException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n\r\n    public void AddDocument<T>(string data) where T : class\r\n    {\r\n        var document = DeserializeDocument<T>(data);\r\n\r\n        switch (document)\r\n        {\r\n            case Transaction t:\r\n                CreateTransaction(t);\r\n                break;\r\n            case RatingOperation ro:\r\n                CreateRatingOperation(ro);\r\n                break;\r\n            case SettlementOrder so:\r\n                CreateSettlementOrder(so);\r\n                break;\r\n            case EvictionOrder eo:\r\n                CreateEvictionOrder(eo);\r\n                break;\r\n        }\r\n    }\r\n\r\n    public void DeleteDocument<T>(string data) where T : class\r\n    {\r\n        try\r\n        {\r\n            var document = DeserializeDocument<T>(data);\r\n\r\n            switch (document)\r\n            {\r\n                case Transaction t:\r\n                    _context.Transactions.Remove(t);\r\n                    break;\r\n                case RatingOperation ro:\r\n                    _context.RatingOperations.Remove(ro);\r\n                    break;\r\n                case SettlementOrder:\r\n                case EvictionOrder:\r\n                    throw new InvalidRequestDataException(\r\n                        \"Orders cannot be deleted\");\r\n                default:\r\n                    throw new InvalidRequestDataException(\r\n                        \"Document type is unknown or unspecified\");\r\n            }\r\n\r\n            _context.SaveChanges();\r\n        }\r\n        catch (DbUpdateException e)\r\n        {\r\n            throw new DbUpdateException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n\r\n    private void CreateSettlementOrder(SettlementOrder so)\r\n    {\r\n        try\r\n        {\r\n            var resident =\r\n                _context.Residents.First(r => r.ResidentId == so.ResidentId);\r\n            var room = _context.Rooms.First(r => r.RoomId == so.RoomId);\r\n\r\n            if (resident.RoomId != null)\r\n                throw new Exception(\"Resident already has a room.\");\r\n\r\n            if (resident.Gender != room.Gender)\r\n                throw new Exception(\r\n                    \"Cannot settle resident into room with different gender\");\r\n\r\n            if (_context.Residents.Count(r => r.RoomId == room.RoomId) ==\r\n                room.Capacity)\r\n                throw new Exception(\"Room is overcrowded\");\r\n\r\n            _context.SettlementOrders.Add(so);\r\n            _context.SaveChanges();\r\n\r\n            resident.RoomId = so.RoomId;\r\n            _context.SaveChanges();\r\n        }\r\n        catch (InvalidOperationException e)\r\n        {\r\n            throw new InvalidOperationException(\"Invalid room or resident id\",\r\n                e);\r\n        }\r\n        catch (DbUpdateException e)\r\n        {\r\n            throw new DbUpdateException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n\r\n    private void CreateEvictionOrder(EvictionOrder eo)\r\n    {\r\n        try\r\n        {\r\n            var resident =\r\n                _context.Residents.First(r => r.ResidentId == eo.ResidentId);\r\n\r\n            if (resident.RoomId is null)\r\n                throw new Exception(\"Resident is already evicted\");\r\n\r\n            _context.EvictionOrders.Add(eo);\r\n            resident.RoomId = null;\r\n            _context.SaveChanges();\r\n        }\r\n        catch (InvalidOperationException e)\r\n        {\r\n            throw new InvalidOperationException(\"Invalid resident id\", e);\r\n        }\r\n        catch (DbUpdateException e)\r\n        {\r\n            throw new DbUpdateException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n\r\n    private void CreateRatingOperation(RatingOperation ro)\r\n    {\r\n        try\r\n        {\r\n            var resident =\r\n                _context.Residents.First(r => r.ResidentId == ro.ResidentId);\r\n\r\n            if (resident.RoomId is null)\r\n                throw new Exception(\"Resident is evicted\");\r\n\r\n            _context.RatingOperations.Add(ro);\r\n            _context.SaveChanges();\r\n        }\r\n        catch (InvalidOperationException e)\r\n        {\r\n            throw new InvalidOperationException(\"Invalid resident id\", e);\r\n        }\r\n        catch (DbUpdateException e)\r\n        {\r\n            throw new DbUpdateException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n\r\n    private void CreateTransaction(Transaction t)\r\n    {\r\n        try\r\n        {\r\n            var resident =\r\n                _context.Residents.First(r => r.ResidentId == t.ResidentId);\r\n\r\n            if (resident.RoomId is null)\r\n                throw new Exception(\"Resident is evicted\");\r\n\r\n            _context.Transactions.Add(t);\r\n            _context.SaveChanges();\r\n        }\r\n        catch (InvalidOperationException e)\r\n        {\r\n            throw new InvalidOperationException(\"Invalid resident id\", e);\r\n        }\r\n        catch (DbUpdateException e)\r\n        {\r\n            throw new DbUpdateException(GetExceptionMessage(e), e);\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/Resources/DocumentsResource.cs b/DMS/Resources/DocumentsResource.cs
--- a/DMS/Resources/DocumentsResource.cs	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/Resources/DocumentsResource.cs	(date 1652461780763)
@@ -99,9 +99,9 @@
             if (resident.RoomId != null)
                 throw new Exception("Resident already has a room.");
 
-            if (resident.Gender != room.Gender)
-                throw new Exception(
-                    "Cannot settle resident into room with different gender");
+            // if (resident.Gender != room.Gender)
+            //     throw new Exception(
+            //         "Cannot settle resident into room with different gender");
 
             if (_context.Residents.Count(r => r.RoomId == room.RoomId) ==
                 room.Capacity)
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from \"react\";\r\nimport dotsImg from \"../../Resident/img/resident3Dots.svg\";\r\nimport \"./Layouts.css\"\r\nimport template from \"../ModalWindow\";\r\n\r\nclass SettlementOrderLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.resident[\"ResidentId\"],\r\n            fullName: this.props.resident[\"LastName\"] + \" \" + this.props.resident[\"FirstName\"] + \" \" + this.props.resident[\"Patronymic\"],\r\n            passportNumber: this.props.resident[\"PassportInformation\"][\"SeriesAndNumber\"],\r\n            issuedBy: \"\",\r\n            address: \"\",\r\n            parentFullName: \"\",\r\n            parentPassportNumber: \"\",\r\n            parentPassportIssuedBy: \"\",\r\n            parentAddress: \"\",\r\n        }\r\n\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    }\r\n    \r\n    async submitSettlement(e) {\r\n        e.preventDefault()\r\n        await fetch(\"api/documents/\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Authorization\": localStorage.getItem(\"token\"),\r\n                \"type\": \"SettlementOrder\",\r\n                \"Content-Type\": 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                \"RoomId\": parseInt(this.props.roomId),\r\n                \"ResidentId\": parseInt(this.state.id),\r\n                \"OrderDate\": new Date(Date.now()).toISOString().slice(0, 10) + \"T00:00:00Z\",\r\n                \"ParentsFullName\": this.state.parentFullName,\r\n                \"ParentsPassportSeriesNumber\": this.state.parentPassportNumber,\r\n                \"ParentsPassportIssuedBy\": this.state.parentPassportIssuedBy,\r\n                \"ParentsPassportAddress\": this.state.parentAddress\r\n            })\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(data)})\r\n        this.props.updateRoom(this.props.resident)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={\"settlement-order-body\"}>\r\n                <div className=\"rooms-header in-modal\" style={{marginBottom: \"5%\"}}>ПРИКАЗ О ЗАСЕЛЕНИИ</div>\r\n                <div className=\"rooms-header mini\">реквизиты нанимателя</div>\r\n                \r\n                <div className=\"settlement-content\">\r\n                    <div className=\"rooms-header mini type\">студент</div>\r\n                    <form>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>ФИО:</label> <input autoFocus={this.state.id === null} name={\"fullName\"}\r\n                                                       onChange={this.handleChange} readOnly={true}\r\n                                                       value={this.state.fullName} type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Серия номер:</label> <input name={\"passportNumber\"} onChange={this.handleChange}\r\n                                                               readOnly={true} value={this.state.passportNumber}\r\n                                                               type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Выдан:</label> <input name={\"issuedBy\"} onChange={this.handleChange} readOnly={true}\r\n                                                         value={this.state.issuedBy} type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Адрес:</label> <input name={\"address\"} onChange={this.handleChange} readOnly={true}\r\n                                                         value={this.state.address} type=\"text\"/> <br/>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"rooms-header mini type\">родитель, законный представитель</div>\r\n                    <form>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>ФИО:</label> <input autoFocus={this.state.id === null} name={\"parentFullName\"}\r\n                                                       onChange={this.handleChange} readOnly={false}\r\n                                                       value={this.state.parentFullName} type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Серия номер:</label> <input name={\"parentPassportNumber\"} onChange={this.handleChange}\r\n                                                               readOnly={false} value={this.state.parentPassportNumber}\r\n                                                               type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Выдан:</label> <input name={\"parentPassportIssuedBy\"} onChange={this.handleChange} readOnly={false}\r\n                                                         value={this.state.parentPassportIssuedBy} type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className=\"resident-content-row\">\r\n                            <label>Адрес:</label> <input name={\"parentAddress\"} onChange={this.handleChange} readOnly={false}\r\n                                                         value={this.state.parentAddress} type=\"text\"/> <br/>\r\n                        </div>\r\n                        <div className={\"resident-content-row\"}>\r\n                            <input onClick={(e) => this.submitSettlement(e)} className={\"save-btn\"} type={\"submit\"} value={\"Сохранить\"}/>\r\n                        </div>\r\n                    </form>\r\n                    \r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SettlementOrderLayout;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js	(date 1652632865905)
@@ -38,17 +38,16 @@
             body: JSON.stringify({
                 "RoomId": parseInt(this.props.roomId),
                 "ResidentId": parseInt(this.state.id),
-                "OrderDate": new Date(Date.now()).toISOString().slice(0, 10) + "T00:00:00Z",
+                "OrderDate": new Date(Date.now()).toISOString(),
                 "ParentsFullName": this.state.parentFullName,
                 "ParentsPassportSeriesNumber": this.state.parentPassportNumber,
                 "ParentsPassportIssuedBy": this.state.parentPassportIssuedBy,
                 "ParentsPassportAddress": this.state.parentAddress
             })
         })
-            .then((response) => response.json())
-            .then((data) => {
-                console.log(data)})
+
         this.props.updateRoom(this.props.resident)
+        this.props.toggleHandler()
     }
 
     render() {
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from \"react\";\r\nimport \"./Layouts.css\"\r\n\r\nclass EvictionOrderLayout extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.resident.id,\r\n            fullName: this.props.resident[\"LastName\"] + \" \" + this.props.resident[\"FirstName\"] + \" \" + this.props.resident[\"Patronymic\"],\r\n            transactionSum: \"\",\r\n            transactionDate: \"\",\r\n        }\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n    handleChange(event) {\r\n        this.setState({[event.target.name]: event.target.value})\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"rooms-header in-modal\">Транзакции</div>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <div className=\"resident-content-row\">\r\n                        <label>ФИО:</label> <input autoFocus={this.state.id === null} name={\"fullName\"}\r\n                                                   onChange={this.handleChange} readOnly={true}\r\n                                                   value={this.state.fullName} type=\"text\"/> <br/>\r\n                    </div>\r\n\r\n                    <div className=\"resident-content-row\">\r\n                        <label>Сумма:</label> <input name={\"transactionSum\"} onChange={this.handleChange} readOnly={false}\r\n                                                     value={this.state.transactionSum} type=\"number\"/> <br/>\r\n                    </div>\r\n                    <div className=\"resident-content-row\">\r\n                        <label>Дата:</label>\r\n                        <input name={\"transactionDate\"} onChange={this.handleChange}\r\n                               readOnly={false} value={this.state.transactionDate}\r\n                               type=\"date\"/><br/>\r\n                    </div>\r\n                    <div className={\"resident-content-row\"}>\r\n                        <input className={\"save-btn\"} type={\"submit\"} value={\"Сохранить\"}/>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default EvictionOrderLayout;   
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js	(date 1652633033739)
@@ -6,10 +6,10 @@
         super(props);
 
         this.state = {
-            id: this.props.resident.id,
+            id: this.props.resident["ResidentId"],
             fullName: this.props.resident["LastName"] + " " + this.props.resident["FirstName"] + " " + this.props.resident["Patronymic"],
-            transactionSum: "",
-            transactionDate: "",
+            transactionSum: null,
+            transactionDate: new Date(Date.now()).toISOString().slice(0, 10),
         }
         this.handleChange = this.handleChange.bind(this)
     }
@@ -17,6 +17,26 @@
     handleChange(event) {
         this.setState({[event.target.name]: event.target.value})
     }
+    
+    async submitTransaction(e) {
+        e.preventDefault()
+        await fetch("api/documents/", {
+            method: "POST",
+            headers: {
+                "Authorization": localStorage.getItem("token"),
+                "type": "Transaction",
+                "Content-Type": 'application/json',
+            },
+            body: JSON.stringify({
+                "ResidentId": parseInt(this.state.id),
+                "OperationDate": this.state.transactionDate + "T00:00:00Z",
+                "Sum": parseInt(this.state.transactionSum)
+            })
+        })
+            .then((response) => response.json())
+            .then((data) => {
+                console.log(data)})
+    }
 
     render() {
         return (
@@ -24,8 +44,8 @@
                 <div className="rooms-header in-modal">Транзакции</div>
                 <form onSubmit={this.handleSubmit}>
                     <div className="resident-content-row">
-                        <label>ФИО:</label> <input autoFocus={this.state.id === null} name={"fullName"}
-                                                   onChange={this.handleChange} readOnly={true}
+                        <label>ФИО:</label> <input name={"fullName"}
+                                                   readOnly={true}
                                                    value={this.state.fullName} type="text"/> <br/>
                     </div>
 
@@ -40,7 +60,7 @@
                                type="date"/><br/>
                     </div>
                     <div className={"resident-content-row"}>
-                        <input className={"save-btn"} type={"submit"} value={"Сохранить"}/>
+                        <input onClick={(e) => this.submitTransaction(e)} className={"save-btn"} type={"submit"} value={"Сохранить"}/>
                     </div>
                 </form>
             </div>
Index: .idea/.idea.DMS/.idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoGeneratedRunConfigurationManager\">\r\n    <projectFile>DMS.csproj</projectFile>\r\n    <projectFile>DMS/DMS.csproj</projectFile>\r\n    <projectFile>DataManipulation/DataManipulation.csproj</projectFile>\r\n    <projectFile profileName=\"DMS\">DMS/DMS.csproj</projectFile>\r\n    <projectFile profileName=\"IIS Express\">DMS/DMS.csproj</projectFile>\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"4cb9a6c2-3465-4915-9898-261fca42efef\" name=\"Default Changelist\" comment=\"Made Settlement API&#10;Fixed modal window view\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/dataSources/05ea521b-2c93-4614-9e36-836de217e28d.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/dataSources/05ea521b-2c93-4614-9e36-836de217e28d.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/shelf/Uncommitted_changes_before_Merge_at_06-May-22_1_09_PM_[Changes]/shelved.patch\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/shelf/Uncommitted_changes_before_Merge_at_06-May-22_1_09_PM__Changes_.xml\" beforeDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/.idea.DMS/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/ClientApp/src/App.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/ClientApp/src/App.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/DMS/Resources/DocumentsResource.cs\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/DMS/Resources/DocumentsResource.cs\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\r\n      <map>\r\n        <entry key=\"$PROJECT_DIR$\" value=\"master\" />\r\n      </map>\r\n    </option>\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n    <option name=\"RESET_MODE\" value=\"HARD\" />\r\n  </component>\r\n  <component name=\"HighlightingSettingsPerFile\">\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/ClientApp/package-lock.json\" root0=\"SKIP_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/Controllers/DocumentsController.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/Controllers/DormitoryController.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/Controllers/ResidentsController.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/Controllers/RoomsController.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/Models/ApplicationContext.cs\" root0=\"FORCE_HIGHLIGHTING\" />\r\n    <setting file=\"file://$PROJECT_DIR$/DMS/obj/Debug/net6.0/.NETCoreApp,Version=v6.0.AssemblyAttributes.cs\" root0=\"SKIP_HIGHLIGHTING\" />\r\n  </component>\r\n  <component name=\"MacroExpansionManager\">\r\n    <option name=\"directoryName\" value=\"q1xpwctb\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProblemsViewState\">\r\n    <option name=\"selectedTabId\" value=\"CurrentFile\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"28a24wI2liIL3U1zsEZRZuHflnd\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">{\r\n  &quot;keyToString&quot;: {\r\n    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,\r\n    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,\r\n    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,\r\n    &quot;full.screen.before.presentation.mode&quot;: &quot;false&quot;,\r\n    &quot;last_opened_file_path&quot;: &quot;/home/wingim/RiderProjects/iret-sila&quot;,\r\n    &quot;nodejs_package_manager_path&quot;: &quot;npm&quot;,\r\n    &quot;settings.editor.selected.configurable&quot;: &quot;reference.settingsdialog.IDE.editor.colors.Color Scheme Font&quot;,\r\n    &quot;vue.rearranger.settings.migration&quot;: &quot;true&quot;\r\n  },\r\n  &quot;keyToStringList&quot;: {\r\n    &quot;DatabaseDriversLRU&quot;: [\r\n      &quot;postgresql&quot;\r\n    ]\r\n  }\r\n}</component>\r\n  <component name=\"RunManager\" selected=\".NET Launch Settings Profile.DMS\">\r\n    <configuration name=\"DataManipulation\" type=\"DotNetProject\" factoryName=\".NET Project\">\r\n      <option name=\"EXE_PATH\" value=\"\" />\r\n      <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"\" />\r\n      <option name=\"PASS_PARENT_ENVS\" value=\"1\" />\r\n      <option name=\"USE_EXTERNAL_CONSOLE\" value=\"0\" />\r\n      <option name=\"USE_MONO\" value=\"0\" />\r\n      <option name=\"RUNTIME_ARGUMENTS\" value=\"\" />\r\n      <option name=\"PROJECT_PATH\" value=\"$PROJECT_DIR$/DataManipulation/DataManipulation.csproj\" />\r\n      <option name=\"PROJECT_EXE_PATH_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_ARGUMENTS_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_WORKING_DIRECTORY_TRACKING\" value=\"1\" />\r\n      <option name=\"PROJECT_KIND\" value=\"DotNetCore\" />\r\n      <option name=\"PROJECT_TFM\" value=\"\" />\r\n      <method v=\"2\">\r\n        <option name=\"Build\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"DMS\" type=\"LaunchSettings\" factoryName=\".NET Launch Settings Profile\">\r\n      <option name=\"LAUNCH_PROFILE_PROJECT_FILE_PATH\" value=\"$PROJECT_DIR$/DMS/DMS.csproj\" />\r\n      <option name=\"LAUNCH_PROFILE_TFM\" value=\"net6.0\" />\r\n      <option name=\"LAUNCH_PROFILE_NAME\" value=\"DMS\" />\r\n      <option name=\"USE_EXTERNAL_CONSOLE\" value=\"0\" />\r\n      <option name=\"USE_MONO\" value=\"0\" />\r\n      <option name=\"RUNTIME_ARGUMENTS\" value=\"\" />\r\n      <option name=\"GENERATE_APPLICATIONHOST_CONFIG\" value=\"1\" />\r\n      <option name=\"SHOW_IIS_EXPRESS_OUTPUT\" value=\"0\" />\r\n      <option name=\"SEND_DEBUG_REQUEST\" value=\"1\" />\r\n      <option name=\"ADDITIONAL_IIS_EXPRESS_ARGUMENTS\" value=\"\" />\r\n      <method v=\"2\">\r\n        <option name=\"Build\" />\r\n      </method>\r\n    </configuration>\r\n    <configuration name=\"DMS: IIS Express\" type=\"LaunchSettings\" factoryName=\".NET Launch Settings Profile\">\r\n      <option name=\"LAUNCH_PROFILE_PROJECT_FILE_PATH\" value=\"$PROJECT_DIR$/DMS/DMS.csproj\" />\r\n      <option name=\"LAUNCH_PROFILE_TFM\" value=\"net6.0\" />\r\n      <option name=\"LAUNCH_PROFILE_NAME\" value=\"IIS Express\" />\r\n      <option name=\"USE_EXTERNAL_CONSOLE\" value=\"0\" />\r\n      <option name=\"USE_MONO\" value=\"0\" />\r\n      <option name=\"RUNTIME_ARGUMENTS\" value=\"\" />\r\n      <option name=\"GENERATE_APPLICATIONHOST_CONFIG\" value=\"1\" />\r\n      <option name=\"SHOW_IIS_EXPRESS_OUTPUT\" value=\"0\" />\r\n      <option name=\"SEND_DEBUG_REQUEST\" value=\"1\" />\r\n      <option name=\"ADDITIONAL_IIS_EXPRESS_ARGUMENTS\" value=\"\" />\r\n      <method v=\"2\">\r\n        <option name=\"Build\" />\r\n      </method>\r\n    </configuration>\r\n    <list>\r\n      <item itemvalue=\".NET Launch Settings Profile.DMS\" />\r\n      <item itemvalue=\".NET Launch Settings Profile.DMS: IIS Express\" />\r\n      <item itemvalue=\".NET Project.DataManipulation\" />\r\n    </list>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <created>1651440189802</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1651440189802</updated>\r\n      <workItem from=\"1651440193454\" duration=\"526000\" />\r\n      <workItem from=\"1651440767630\" duration=\"157000\" />\r\n      <workItem from=\"1651441256958\" duration=\"385000\" />\r\n      <workItem from=\"1651442963629\" duration=\"496000\" />\r\n      <workItem from=\"1651477689757\" duration=\"703000\" />\r\n      <workItem from=\"1651479421526\" duration=\"1697000\" />\r\n      <workItem from=\"1651482822313\" duration=\"1268000\" />\r\n      <workItem from=\"1651493356358\" duration=\"323000\" />\r\n      <workItem from=\"1651493691978\" duration=\"4756000\" />\r\n      <workItem from=\"1651511172362\" duration=\"3206000\" />\r\n      <workItem from=\"1651581419707\" duration=\"15633000\" />\r\n      <workItem from=\"1651641316548\" duration=\"3415000\" />\r\n      <workItem from=\"1651645790289\" duration=\"1841000\" />\r\n      <workItem from=\"1651690078179\" duration=\"6967000\" />\r\n      <workItem from=\"1651727991106\" duration=\"1124000\" />\r\n      <workItem from=\"1651755495624\" duration=\"6539000\" />\r\n      <workItem from=\"1651809334967\" duration=\"9697000\" />\r\n      <workItem from=\"1651860453620\" duration=\"530000\" />\r\n      <workItem from=\"1651899347820\" duration=\"9676000\" />\r\n      <workItem from=\"1652084818591\" duration=\"1914000\" />\r\n      <workItem from=\"1652089710469\" duration=\"1061000\" />\r\n      <workItem from=\"1652110786501\" duration=\"63000\" />\r\n      <workItem from=\"1652119587962\" duration=\"5201000\" />\r\n      <workItem from=\"1652162256259\" duration=\"9476000\" />\r\n      <workItem from=\"1652173976287\" duration=\"3957000\" />\r\n      <workItem from=\"1652334860589\" duration=\"1908000\" />\r\n      <workItem from=\"1652336791974\" duration=\"188000\" />\r\n      <workItem from=\"1652365136788\" duration=\"7797000\" />\r\n      <workItem from=\"1652381538385\" duration=\"30931000\" />\r\n      <workItem from=\"1652623559371\" duration=\"1270000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"Start making Documents (SettlementOrder, EvictionOrder, RatingOperation) resource and controller\">\r\n      <created>1651505569899</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651505569899</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"Data header processing in resident and room requests.&#10;Format files to wrap at 80 symbols\">\r\n      <created>1651645064854</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651645064854</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"Better date header processing in controllers and resources\">\r\n      <created>1651696194462</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651696194462</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00004\" summary=\"Fix bug when RoomId became null after resident update request&#10;Change ResidentsController.cs PUT request route\">\r\n      <created>1651759876797</created>\r\n      <option name=\"number\" value=\"00004\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651759876797</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00005\" summary=\"Integrate Redis cache. &#10;DormitoryController gets and sets cache constants passed in http body&#10;Login now compares input password HMACSha256 cache with stored (commented not to complicate dev process)\">\r\n      <created>1651813416758</created>\r\n      <option name=\"number\" value=\"00005\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651813416758</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00006\" summary=\"Enhanced POST request processing due to parsing in Resource (previously in Controller)&#10;Start making DocumentsResource&#10;Add /api/stats route with general dormitory information&#10;Constants POST and GET requests are now in /api/stats/constants route\">\r\n      <created>1651819779535</created>\r\n      <option name=\"number\" value=\"00006\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1651819779535</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00007\" summary=\"Integrate server with new database model (PassportInformation)\">\r\n      <created>1652003054061</created>\r\n      <option name=\"number\" value=\"00007\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652003054061</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00008\" summary=\"Rename table passport_information\">\r\n      <created>1652004163694</created>\r\n      <option name=\"number\" value=\"00008\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652004163694</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00009\" summary=\"Room controller now also returns IsFull field\">\r\n      <created>1652120280760</created>\r\n      <option name=\"number\" value=\"00009\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652120280760</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00010\" summary=\"Gender filter in GetAllResidents header\">\r\n      <created>1652127163816</created>\r\n      <option name=\"number\" value=\"00010\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652127163816</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00011\" summary=\"Change database Transaction and RatingOperation tables primary key to composite (ResId + Date)&#10;Add new &quot;Course&quot; column to Resident&#10;All documents can be added now&#10;Add deleting of transactions and rating operations\">\r\n      <created>1652170963289</created>\r\n      <option name=\"number\" value=\"00011\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652170963289</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00012\" summary=\"Update SettlementOrder model&#10;POST request to edit room gender&#10;Dormitory reset done\">\r\n      <created>1652299549156</created>\r\n      <option name=\"number\" value=\"00012\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652299549156</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00013\" summary=\"Replace all Tuple&lt;bool, string&gt; with Exceptions\">\r\n      <created>1652336711224</created>\r\n      <option name=\"number\" value=\"00013\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652336711224</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00014\" summary=\"Delete WeatherForecastController.cs\">\r\n      <created>1652336971500</created>\r\n      <option name=\"number\" value=\"00014\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652336971500</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00015\" summary=\"Started making settings API\">\r\n      <created>1652384092671</created>\r\n      <option name=\"number\" value=\"00015\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652384092671</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00016\" summary=\"Done settings API&#10;Done password check for setting applying\">\r\n      <created>1652398407545</created>\r\n      <option name=\"number\" value=\"00016\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652398407545</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00017\" summary=\"Settings button now changes appearance correctly&#10;Made resident filtration by name and correct gender\">\r\n      <created>1652454858867</created>\r\n      <option name=\"number\" value=\"00017\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652454858867</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00018\" summary=\"Minor appearance changes of residents list\">\r\n      <created>1652456704940</created>\r\n      <option name=\"number\" value=\"00018\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652456704940</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00019\" summary=\"Made Settlement API&#10;Fixed modal window view\">\r\n      <created>1652462946931</created>\r\n      <option name=\"number\" value=\"00019\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1652462946931</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"20\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"UnityCheckinConfiguration\" checkUnsavedScenes=\"false\" />\r\n  <component name=\"UnityProjectConfiguration\" hasMinimizedUI=\"false\" />\r\n  <component name=\"UnityUnitTestConfiguration\" currentTestLauncher=\"NUnit\" />\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State>\r\n              <option name=\"FILTERS\">\r\n                <map>\r\n                  <entry key=\"branch\">\r\n                    <value>\r\n                      <list>\r\n                        <option value=\"Client\" />\r\n                      </list>\r\n                    </value>\r\n                  </entry>\r\n                </map>\r\n              </option>\r\n            </State>\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"Start making Documents (SettlementOrder, EvictionOrder, RatingOperation) resource and controller\" />\r\n    <MESSAGE value=\"Data header processing in resident and room requests.&#10;Format files to wrap at 80 symbols\" />\r\n    <MESSAGE value=\"Better date header processing in controllers and resources\" />\r\n    <MESSAGE value=\"Fix bug when RoomId became null after resident update request&#10;Change ResidentsController.cs PUT request route\" />\r\n    <MESSAGE value=\"Integrate Redis cache. &#10;DormitoryController gets and sets cache constants passed in http body&#10;Login now compares input password HMACSha256 cache with stored (commented not to complicate dev process)\" />\r\n    <MESSAGE value=\"Enhanced POST request processing due to parsing in Resource (previously in Controller)&#10;Start making DocumentsResource&#10;Add /api/stats route with general dormitory information&#10;Constants POST and GET requests are now in /api/stats/constants route\" />\r\n    <MESSAGE value=\"Integrate server with new database model (PassportInformation)\" />\r\n    <MESSAGE value=\"Rename table passport_information\" />\r\n    <MESSAGE value=\"Room controller now also returns IsFull field\" />\r\n    <MESSAGE value=\"Gender filter in GetAllResidents header\" />\r\n    <MESSAGE value=\"Change database Transaction and RatingOperation tables primary key to composite (ResId + Date)&#10;Add new &quot;Course&quot; column to Resident&#10;All documents can be added now&#10;Add deleting of transactions and rating operations\" />\r\n    <MESSAGE value=\"Update SettlementOrder model&#10;POST request to edit room gender&#10;Dormitory reset done\" />\r\n    <MESSAGE value=\"Replace all Tuple&lt;bool, string&gt; with Exceptions\" />\r\n    <MESSAGE value=\"Delete WeatherForecastController.cs\" />\r\n    <MESSAGE value=\"Started making settings API\" />\r\n    <MESSAGE value=\"Done settings API&#10;Done password check for setting applying\" />\r\n    <MESSAGE value=\"Settings button now changes appearance correctly&#10;Made resident filtration by name and correct gender\" />\r\n    <MESSAGE value=\"Minor appearance changes of residents list\" />\r\n    <MESSAGE value=\"Made Settlement API&#10;Fixed modal window view\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Made Settlement API&#10;Fixed modal window view\" />\r\n  </component>\r\n  <component name=\"XSLT-Support.FileAssociations.UIState\">\r\n    <expand />\r\n    <select />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.idea.DMS/.idea/workspace.xml b/.idea/.idea.DMS/.idea/workspace.xml
--- a/.idea/.idea.DMS/.idea/workspace.xml	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/.idea/.idea.DMS/.idea/workspace.xml	(date 1652633794810)
@@ -8,16 +8,19 @@
     <projectFile profileName="IIS Express">DMS/DMS.csproj</projectFile>
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="4cb9a6c2-3465-4915-9898-261fca42efef" name="Default Changelist" comment="Made Settlement API&#10;Fixed modal window view">
-      <change beforePath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/dataSources/05ea521b-2c93-4614-9e36-836de217e28d.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/dataSources/05ea521b-2c93-4614-9e36-836de217e28d.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/shelf/Uncommitted_changes_before_Merge_at_06-May-22_1_09_PM_[Changes]/shelved.patch" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/shelf/Uncommitted_changes_before_Merge_at_06-May-22_1_09_PM__Changes_.xml" beforeDir="false" />
+    <list default="true" id="4cb9a6c2-3465-4915-9898-261fca42efef" name="Default Changelist" comment="Online room update">
       <change beforePath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/.idea.DMS/.idea/workspace.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/App.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/App.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.js" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/InRoomResidents/InRoomResidents.jsx" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindow.jsx" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/EvictionOrderLayout.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/Layouts.css" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/ResidentsListLayout.js" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/SettlementOrderLayout.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/ModalWindow/ModalWindowLayouts/TransactionsLayout.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/DMS/ClientApp/src/components/Resident/Resident.jsx" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/ClientApp/src/components/Resident/Resident.jsx" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/DMS/Resources/DocumentsResource.cs" beforeDir="false" afterPath="$PROJECT_DIR$/DMS/Resources/DocumentsResource.cs" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
@@ -41,6 +44,7 @@
     <setting file="file://$PROJECT_DIR$/DMS/Controllers/ResidentsController.cs" root0="FORCE_HIGHLIGHTING" />
     <setting file="file://$PROJECT_DIR$/DMS/Controllers/RoomsController.cs" root0="FORCE_HIGHLIGHTING" />
     <setting file="file://$PROJECT_DIR$/DMS/Models/ApplicationContext.cs" root0="FORCE_HIGHLIGHTING" />
+    <setting file="mock://C:/Users/Bulat/RiderProjects/DMS/DMS/Resources/DocumentsResource.cs" root0="SKIP_HIGHLIGHTING" />
     <setting file="file://$PROJECT_DIR$/DMS/obj/Debug/net6.0/.NETCoreApp,Version=v6.0.AssemblyAttributes.cs" root0="SKIP_HIGHLIGHTING" />
   </component>
   <component name="MacroExpansionManager">
@@ -168,7 +172,7 @@
       <workItem from="1652336791974" duration="188000" />
       <workItem from="1652365136788" duration="7797000" />
       <workItem from="1652381538385" duration="30931000" />
-      <workItem from="1652623559371" duration="1270000" />
+      <workItem from="1652623559371" duration="8609000" />
     </task>
     <task id="LOCAL-00001" summary="Start making Documents (SettlementOrder, EvictionOrder, RatingOperation) resource and controller">
       <created>1651505569899</created>
@@ -303,7 +307,14 @@
       <option name="project" value="LOCAL" />
       <updated>1652462946931</updated>
     </task>
-    <option name="localTasksCounter" value="20" />
+    <task id="LOCAL-00020" summary="Online room update">
+      <created>1652625836510</created>
+      <option name="number" value="00020" />
+      <option name="presentableId" value="LOCAL-00020" />
+      <option name="project" value="LOCAL" />
+      <updated>1652625836510</updated>
+    </task>
+    <option name="localTasksCounter" value="21" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -355,7 +366,8 @@
     <MESSAGE value="Settings button now changes appearance correctly&#10;Made resident filtration by name and correct gender" />
     <MESSAGE value="Minor appearance changes of residents list" />
     <MESSAGE value="Made Settlement API&#10;Fixed modal window view" />
-    <option name="LAST_COMMIT_MESSAGE" value="Made Settlement API&#10;Fixed modal window view" />
+    <MESSAGE value="Online room update" />
+    <option name="LAST_COMMIT_MESSAGE" value="Online room update" />
   </component>
   <component name="XSLT-Support.FileAssociations.UIState">
     <expand />
Index: DMS/ClientApp/src/App.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React from 'react';\r\nimport './custom.css'\r\nimport Sidebar from \"./components/Sidebar\";\r\nimport RoomsBlock from \"./components/RoomsBlock\"\r\nimport InRoomResidents from \"./components/InRoomResidents\";\r\nimport {Navigate, Route, Routes} from \"react-router-dom\";\r\nimport Login from \"./components/Login\";\r\nimport Residents from \"./components/Residents\";\r\nimport Settings from \"./components/Settings\";\r\nimport Documents from \"./components/Documents\";\r\nimport settingsIco from './components/Sidebar/img/settingsIco.svg'\r\nimport activeSettingsIco from './components/Sidebar/img/activeSettingsIco.svg'\r\n\r\nclass App extends React.Component {\r\n    static displayName = App.name;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showRooms: false,\r\n            showInRoomResidents: false,\r\n            showResidents: false,\r\n            showDocuments: false,\r\n            showSettings: false,\r\n            floors: [],\r\n            activeRoom: [],\r\n            allResidentsList: [],\r\n            allResidentsFilterList: [],\r\n        }\r\n\r\n        console.log(new Date(Date.now()).toISOString())\r\n        \r\n        //binds\r\n        this.showRoomsButtonClickHandler = this.showRoomsButtonClickHandler.bind(this);\r\n        this.openRoomButtonClickHandler = this.openRoomButtonClickHandler.bind(this);\r\n        this.closeRoomButtonClickHandler = this.closeRoomButtonClickHandler.bind(this);\r\n        this.showResidentsBlockButtonClickHandler = this.showResidentsBlockButtonClickHandler.bind(this);\r\n        this.addNewResidentHandler = this.addNewResidentHandler.bind(this);\r\n        this.filterResidentsHandler = this.filterResidentsHandler.bind(this);\r\n        this.updateAllResidentsList = this.updateAllResidentsList.bind(this);\r\n        this.updateRoom = this.updateRoom.bind(this)\r\n        this.showSettingsButtonClickHandler = this.showSettingsButtonClickHandler.bind(this)\r\n        this.showDocumentsButtonClickHandler = this.showDocumentsButtonClickHandler.bind(this);\r\n    }\r\n    \r\n    /* Handlers */\r\n\r\n    // open settings\r\n    async showSettingsButtonClickHandler() {\r\n        this.setState({\r\n            showResidents: false,\r\n            showRooms: false,\r\n            showInRoomResidents: false,\r\n            showDocuments: false,\r\n            showSettings: !this.state.showSettings,\r\n        })\r\n        await this.enableSettingsBtn()\r\n    }\r\n    \r\n    //open all resident of dormitory list\r\n    async showResidentsBlockButtonClickHandler() {\r\n        const data = await this.fetchAllResidentsList()\r\n        \r\n        this.setState({\r\n            showRooms: false,\r\n            showInRoomResidents: false,\r\n            showDocuments: false,\r\n            showSettings: false,\r\n            showResidents: true,\r\n            allResidentsList: data,\r\n            allResidentsFilterList: data\r\n        })\r\n        await this.disableSettingsBtn()\r\n    }\r\n    \r\n    // switch img and bg of settings btn\r\n    async disableSettingsBtn() {\r\n        const elem = document.querySelector(\".sidebar-settings-btn\").children[0]\r\n        elem.src = settingsIco;\r\n        elem.parentElement.style.background = \"#299DCE\";\r\n    }\r\n\r\n    // switch img and bg of settings btn\r\n    async enableSettingsBtn() {\r\n        const elem = document.querySelector(\".sidebar-settings-btn\").children[0]\r\n        elem.src = this.state.showSettings ? settingsIco : activeSettingsIco;\r\n        elem.parentElement.style.background = this.state.showSettings ? \"#299DCE\" : \"white\";\r\n    }\r\n    \r\n    // open documents\r\n    async showDocumentsButtonClickHandler() {\r\n        const data = await this.fetchAllDocuments()\r\n        this.setState({\r\n            showResidents: false,\r\n            showRooms: false,\r\n            showInRoomResidents: false,\r\n            showDocuments: true,\r\n            showSettings: false,\r\n            allResidentsList: data,\r\n            allResidentsFilterList: data\r\n        })\r\n        await this.disableSettingsBtn()\r\n    }\r\n    \r\n    \r\n    //open all dormitory rooms'n'floors block\r\n    async showRoomsButtonClickHandler() {\r\n        await this.fetchFloors()\r\n        \r\n        this.setState(\r\n            {\r\n            showResidents: false,\r\n            showDocuments: false,\r\n            showSettings: false,\r\n            showRooms: true\r\n        })\r\n        await this.disableSettingsBtn()\r\n    }\r\n\r\n    //open and fetch data for specified room\r\n    async openRoomButtonClickHandler(room) {\r\n        this.setState({showInRoomResidents: false})\r\n        const data = await this.fetchRoom(room)\r\n        this.setState({activeRoom: data})\r\n        this.setState({showInRoomResidents: true})\r\n    }\r\n    \r\n    // update opened room\r\n    async updateRoom(resident, remove=false) {\r\n        this.state.activeRoom[\"Residents\"].push(resident)\r\n    }\r\n\r\n    closeRoomButtonClickHandler() {\r\n        this.setState({showInRoomResidents : false})\r\n    }\r\n    \r\n    addNewResidentHandler() {\r\n        this.state.allResidentsList.push({\r\n                ResidentId: null,\r\n                LastName: '',\r\n                FirstName: '',\r\n                Patronymic: '',\r\n                Gender: 'М',\r\n                BirthDate: '',\r\n                PassportInformation: {SeriesAndNumber: null},\r\n                Tin: null,\r\n                Rating: null,\r\n                Debt: null,\r\n                Reports: null,\r\n            })\r\n        this.setState({\r\n            allResidentsList: this.state.allResidentsList,\r\n            allResidentFilterList: this.state.allResidentsList,\r\n        })\r\n    }\r\n    \r\n    // residents list filtration\r\n    async filterResidentsHandler(list) {\r\n        this.setState({\r\n            allResidentsFilterList: list,\r\n        })\r\n    }\r\n    \r\n    async updateAllResidentsList(elem, update=false) {\r\n        if (update) {\r\n            this.state.allResidentsList[\r\n                this.state.allResidentsList.indexOf(\r\n                    this.state.allResidentsList.find(\r\n                        i => i.ResidentId === elem.ResidentId))] = elem\r\n        }\r\n        else {\r\n            this.state.allResidentsList.push(elem)\r\n        }\r\n    }\r\n    \r\n    /* Fetch Functions */\r\n    \r\n    // get all documents\r\n    async fetchAllDocuments() {\r\n        const response = await fetch(\"/api/documents\", {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\": localStorage.getItem(\"token\")\r\n            }\r\n        });\r\n        const data = await response.json()\r\n        return data.Value\r\n    }\r\n    //get all residents in dormitory\r\n    async fetchAllResidentsList() {\r\n        const requestUrl = \"api/residents\"\r\n        const response = await fetch(requestUrl, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\" : localStorage.getItem(\"token\")\r\n            }\r\n        })\r\n        const data = await response.json()\r\n        return data.Value\r\n    }\r\n    \r\n    //get room with specified ID\r\n    async fetchRoom(room) {\r\n        const requestUrl = \"api/rooms/\" + room\r\n        const response = await fetch(requestUrl, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\" : localStorage.getItem(\"token\")\r\n            }\r\n        })\r\n        \r\n        const data = await response.json()\r\n        return data.Value\r\n    }\r\n    \r\n    //get all floors\r\n    async fetchFloors() {\r\n        const requestUrl = \"api/rooms/floors\";\r\n        await fetch(requestUrl, {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Authorization\" : localStorage.getItem(\"token\")\r\n            }\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => data.Value)\r\n            .then((val) => {\r\n                this.setState({\r\n                    floors: val\r\n                })\r\n            })\r\n    }\r\n\r\n    getTokenExpDate() {\r\n        let token = localStorage.getItem(\"token\").split(\" \")[1];\r\n        let base64Url = token.split('.')[1];\r\n        let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        let jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n        let parsed = JSON.parse(jsonPayload)\r\n        return parsed[\"exp\"] * 1000;\r\n    }\r\n\r\n    checkTokenLifetime() {\r\n        try {\r\n            let expDate = this.getTokenExpDate();\r\n            console.log()\r\n            if (new Date().getTime() > expDate) {\r\n                localStorage.removeItem(\"token\");\r\n                return <Navigate to=\"/login\"/>\r\n            }\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        this.checkTokenLifetime()\r\n        return (\r\n            <Routes>\r\n                <Route path=\"/login\" element={<Login/>}/>\r\n                <Route path=\"*\" element={\r\n                    <Routes>\r\n                        <Route path=\"/login\" element={<Login/>}/>\r\n                        <Route path=\"/\" element={\r\n                            <React.StrictMode>\r\n                                <Sidebar\r\n                                    showRooms={this.showRoomsButtonClickHandler}\r\n                                    showResidents={this.showResidentsBlockButtonClickHandler}\r\n                                    showSettings={this.showSettingsButtonClickHandler}\r\n                                    showDocuments={this.showDocumentsButtonClickHandler}\r\n                                />\r\n                                <Residents \r\n                                    show={this.state.showResidents}\r\n                                    residentsList={this.state.allResidentsList}\r\n                                    residentsFilterList={this.state.allResidentsFilterList}\r\n                                    addResidentBtnClickHandler={this.addNewResidentHandler}\r\n                                    filterHandler={this.filterResidentsHandler}\r\n                                    updateResidentsList={this.updateAllResidentsList}\r\n                                />\r\n                                <RoomsBlock\r\n                                    show={this.state.showRooms}\r\n                                    openRoom = {this.openRoomButtonClickHandler}\r\n                                    floors={this.state.floors}\r\n                                />\r\n                                <InRoomResidents\r\n                                    show={this.state.showInRoomResidents}\r\n                                    closeButtonClickHandler = {this.closeRoomButtonClickHandler}\r\n                                    room={this.state.activeRoom}\r\n                                    updateRoom={this.updateRoom}\r\n                                />\r\n                                <Documents\r\n                                    show={this.state.showDocuments}\r\n                                    residentsList={this.state.allResidentsList}\r\n                                    residentsFilterList={this.state.allResidentsFilterList}\r\n                                    filterHandler={this.filterResidentsHandler}\r\n                                />\r\n                                <Settings\r\n                                    show={this.state.showSettings}\r\n                                />\r\n                            </React.StrictMode>\r\n                        }/>\r\n                        \r\n                    </Routes>\r\n                }/>\r\n            </Routes>\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/App.js b/DMS/ClientApp/src/App.js
--- a/DMS/ClientApp/src/App.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/App.js	(date 1652628697878)
@@ -28,8 +28,6 @@
             allResidentsList: [],
             allResidentsFilterList: [],
         }
-
-        console.log(new Date(Date.now()).toISOString())
         
         //binds
         this.showRoomsButtonClickHandler = this.showRoomsButtonClickHandler.bind(this);
@@ -128,7 +126,12 @@
     
     // update opened room
     async updateRoom(resident, remove=false) {
-        this.state.activeRoom["Residents"].push(resident)
+        if (remove) {
+            this.state.activeRoom["Residents"].splice(this.state.activeRoom["Residents"].indexOf(resident), 1)
+        }
+        else {
+            this.state.activeRoom["Residents"].push(resident)
+        }
     }
 
     closeRoomButtonClickHandler() {
Index: DMS/ClientApp/src/components/ModalWindow/ModalWindow.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import React    from \"react\";\r\nimport template from \"./ModalWindow.jsx\";\r\nimport './ModalWindowLayouts/Layouts.css'\r\n\r\nclass ModalWindow extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  \r\n  render() {\r\n    return template.call(this);\r\n  }\r\n}\r\n\r\nexport default ModalWindow;\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js b/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js
--- a/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js	(revision 224edf917441068e15c5ed2bd4ac4f7c951e6f3c)
+++ b/DMS/ClientApp/src/components/ModalWindow/ModalWindow.js	(date 1652625921359)
@@ -6,6 +6,17 @@
   constructor(props) {
     super(props);
   }
+
+  layoutsNameToHtmlClassName(layoutName) {
+    const layoutsName = {
+      "SettlementOrderLayout": "settlement-order",
+      "ResidentsListLayout": "residents-list-layout",
+      "EvictionOrderLayout": "eviction-order",
+      "RatingOperationsLayout": "rating-operation",
+      "TransactionsLayout": "transaction-layout"
+    }
+    return layoutsName[layoutName]
+  }
   
   render() {
     return template.call(this);
